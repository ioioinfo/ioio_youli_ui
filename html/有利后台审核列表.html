<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <script src="js/react.min.js"></script>
        <script src="js/react-dom.min.js"></script>
        <script src="js/browser.min.js"></script>
        <script src="js/jquery-3.1.1.min.js" type="text/javascript"></script>
    <style media="screen">
        *{
          padding: 0;
          margin: 0;
        }
        body{
          font-family: "\5FAE\8F6F\96C5\9ED1", Tahoma, Verdana, sans-serif, "微软雅黑";
          padding: 0;
          margin: 0;
          overflow-x: hidden;
        }
        li{
          list-style: none;
        }
        .wrap{
            width: 90%;
            margin: 0 auto;
            overflow: hidden;
        }
        .Left{
          width: 16%;
          height: 700px;
          background: #666;
          display: inline-block;
          float: left;
        }
        .leftHeader{
          width: 100%;
          font-size: 0;
          margin-top: 20px;
          margin-bottom: 55px;
        }
        .header-left{
          width:60px;
          height:60px;
          border-radius: 50%;
          background: #fff;
          display: inline-block;
          vertical-align: middle;
          margin:10px 27px;
        }
        .header-left img{
          width: 60px;
          border-radius: 50%;
          vertical-align: middle;
        }
        .header-right{
          font-size: 14px;
          display: inline-block;
          vertical-align: middle;
        }
        .header-right p{
          height: 40px;
          line-height:40px;

        }
        /*左边下部导航*/
        .leftBottom_li{
            color: #fff;
            font-size: 14px;
            font-weight: normal;
            margin-bottom: 30px;
        }
        .leftBottom_li .leftBottom_li_span1{
            display: inline-block;
            width: 20px;
            height: 24px;
            margin-right: 15px;
            margin-left: 15.444%;
        }
        .leftBottom_li span img{
            width: 100%;
            height: 24px;
            vertical-align: middle;
        }
        .leftBottom_li .leftBottom_li_span3{
            width: 18px;
            height: 18px;
            font-size: 12px;
            border-radius: 9px;
            background: #e84e40;
            text-align: center;
            line-height: 18px;
            display: inline-block;
            margin-left: 15px;

        }
        .Right{
            width: 84%;
            float: left;
        }
        .RightTop{
            display: flex;
            height: 100px;
            border-bottom: 1px solid #f0e6f0;
            box-shadow: 0 5px 0 #f7f5f7;
        }
        .RightTopUl{
            width: 100%;
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
        .RightTopUl li{
            width: 100px;
            height: 60px;
            text-align: center;
            background: #da6e6b;
            line-height: 60px;
            color: #fff;
            border-radius: 4px;
            -webkit-transition:all 1s;
            -moz-transition:all 1s;
            -o-transition:all 1s;

        }
        .RightTopUl .RightTopLi2{
            background: #7278b2;
        }
        .RightTopUl .RightTopLi3{
            background: #4db2a2;
        }
        .RightTopUl .RightTopLi4{
            background: #55acd7;
        }
        .RightTopUl .RightTopLi5{
            background: #74cfd0;
        }
        .RightTopUl .RightTopLi6{
            background: #74cfd0;
        }
        .RightTopUl .RightTopLiColor{
            -webkit-transform:scale(1.2) rotate(10deg);
            -moz-transform:scale(1.2) rotate(10deg);
            -o-transform:scale(1.2) rotate(10deg);

        }

              /*表格样式*/
              table{
                width: 90%;
                background: #fff;
                border-bottom:1px solid #CFCFCF;
                border-right: 1px solid #CFCFCF;
                margin: 0 auto 0;
              }
              th,td{
                border: 1px solid #CFCFCF;
                border-right: none;
                border-bottom: none;
                font-size: 12px;
                text-align: center;
                height: 32px;
                color: #A8ACAD;
              }
              th{
                font-size: 16px;
                color: #5A6A6C;
              }
              th img{
                width: 36px;
                height: 36px;
                vertical-align: middle;
              }
              /*分页*/
              .table-tab{
                width: 90%;
                margin: 0 auto;
                text-align: right;
                padding: 0;
              }
              .table-tab span img{
                width: 16px;
                height:16px;
                vertical-align: middle;
              }
              .table-tab span input{
                width: 35px;
                text-align: center;
              }
              .table-tab span input:first-child{
                margin-right: 10px;
              }
              .table-tab span{
                width: 28px;
                font-size: 14px;
                padding: 7px 2px;
                display: inline-block;
                border: 1px solid #eee;
                margin: 0 5px;
                text-align: center;
                height: 16px;
                line-height: 16px;
                cursor: pointer;
              }
              .table-tab span:last-child{
                margin-right: 0;
              }
              .tabnumber{
                display: inline-block;
              }
              .tabnumber span{
                display: inline-block;
                padding: 5px;
                background: #E5E5E5;
                border-radius: 4px;
              }
              .tabnumber span:hover{
                border: 1px solid #34495D;
              }
              .tabnumber span.om{
                background: #000;
                color: #fff;
              }
              .table-tab  .table-tab-span4{
                width: 72px;
              }
              .table-tab  .table-tab-span5{
                width: 145px;
              }
        </style>
    </head>
    <body>
        <div id="example"></div>
        <script type="text/javascript">
          function getTableData(params,cb) {
            //表头
            var tt = [{name:'select',title:'选择',width:'10%',type:"checkbox"}
            ,{name:'date',title:'图片',width:'20%'}
            ,{name:'order_no',title:'文字信息',width:'40%'}
            ,{name:'money',title:'金额',width:'10%'}
            ,{name:'subscribe',title:'预约返利',width:'5%'}
            ,{name:'recommend',title:'推荐返利',width:'5%'}
            ,{name:'operate',title:'操作',width:'10%'type:"checkbox"}];

            //表格内容
            var tdItems=[{date:"2017-02-13",order_no:"000000009","money":"10000","subscribe":"5%","recommend":"2%"}
                        ,{date:"2017-02-13",order_no:"000000009","money":"10000","subscribe":"5%","recommend":"2%"}];

            //分页数据

            cb({tabthitems:tt,tabtritems:tdItems,allNum:1006,everyNum:20})
          }
        </script>
        <script type="text/babel">
        // 框架
        class Warp extends React.Component {
          render() {
              return (
                <div className="wrap">
                  <Left/>
                  <Right/>
                </div>
              );
          }
        };
        // 左边内容
        class Left extends React.Component {
            constructor(props) {
                super(props);
                this.state = {leftItems: []};
            }
            componentDidMount(){
                var leftItem=[{type:"1", img:"images/img-02.png",name:"返利申请",news:"99"}
                    ,{type:"2", img:"images/img-01.png",name:"返利成功",news:"99"}
                    ,{type:"1", img:"images/img-03.png",name:"客户申诉",news:"99"}
                    ,{type:"2", img:"images/img-04.png",name:"返利统计",news:"99"}];
                this.setState({leftItems:leftItem});
            }
          render() {
              return (
                <div className="Left">
                    <div className="leftHeader">
                      <div className="header-left">
                        <img src="images/header.png" alt="" />
                      </div>
                      <div className="header-right">
                        <p>李小二</p>
                        <p>0527</p>
                      </div>
                    </div>
                    <div className="leftBottom">
                        <ul className="leftBottom_ul">
                        {this.state.leftItems.map(item => (
                            <LeftBottomLi item={item} />
                          ))
                        }
                        </ul>
                    </div>
                </div>
              );
          }
        };
        // 左边下面的导航li
        class LeftBottomLi extends React.Component {
          render() {
              var d=""
              if(this.props.item.type=="1"){
                  d=<span className="leftBottom_li_span3">{this.props.item.news}</span>;
              }
              return (
                <li className="leftBottom_li">
                  <span className="leftBottom_li_span1"><img src={this.props.item.img} alt="" /></span>
                  <span className="leftBottom_li_span2">{this.props.item.name}</span>
                  {d}
                </li>
              );
          }
        };
        // 右边
        class Right extends React.Component {
          render() {

              return (
                <div className="Right">
                    <RightTop/>
                    <WrapRightMain/>
                </div>

              );
          }
        };
        // 右边头部
        class RightTop extends React.Component {
            constructor(props) {
                super(props);
                this.setSelected=this.setSelected.bind(this);
                this.state = {rightItems: [],selected:''};
            }
            setSelected(id){
                this.setState({selected:id});
            }
            componentDidMount(){
                var rightItem=[{word:"创建项目",id:"1"},{word:"客户预约",id:"2"},{word:"客户预约",id:"3"},{word:"客户预约",id:"4"},{word:"客户预约",id:"5"},{word:"客户预约",id:"6"}];
                this.setState({rightItems:rightItem});
            }
          render() {

              return (
                <div className="RightTop">
                    <ul className="RightTopUl">
                        {this.state.rightItems.map(item => (
                            <RightTopLl item={item} setSelected={this.setSelected} selected={this.state.selected} />
                          ))
                        }
                    </ul>
                </div>
              );
          }
        };
        class RightTopLl extends React.Component {
            constructor(props) {
                super(props);
                this.handleClick=this.handleClick.bind(this);
                this.state = {rightItems: []};
            }
            handleClick(e){
                this.props.setSelected(this.props.item.id);

            }
        render() {
              var e="RightTopLi"+this.props.item.id;
              if(this.props.selected==this.props.item.id){
                  e = e+" RightTopLiColor"
              }

              return (
                <li className={e} onClick={this.handleClick}>{this.props.item.word}</li>
              );
          }
        };
        // 右侧下部表格
        class WrapRightMain extends React.Component {
          constructor(props) {
              super(props);
              this.setPage=this.setPage.bind(this);
              this.handleSort=this.handleSort.bind(this);
              this.loadData=this.loadData.bind(this);
              // 初始化一个空对象
              this.state = {tabthitems:[],tabtritems:[],allNum:0,everyNum:20,thisPage:1,sort:{name:"",dir:""}};
          }
          loadData(params1) {
            var params = {thisPage:this.state.thisPage,sort:this.state.sort};
            $.extend(params,params1);

            getTableData(params,function(data) {
              $.extend(data,params1);
              this.setState(data);
            }.bind(this));
          }
          componentDidMount() {
            this.loadData({});
          }
          setPage(thisPage) {
            this.loadData({thisPage:thisPage});
          }
          handleSort(sort){
            this.loadData({sort:sort});
          }
          render() {
            console.log("a");
            return (
              <div className="wrapRightMain">
                <Table tabthitems={this.state.tabthitems} tabtritems={this.state.tabtritems} sort={this.state.sort} onSort={this.handleSort} />
                <Tab setPage={this.setPage} allNum={this.state.allNum} everyNum={this.state.everyNum} thisPage={this.state.thisPage} />
              </div>
            );
          }
        };

        // 表格
        class Table extends React.Component {
          constructor(props) {
              super(props);
          }
          render() {
              return (
                <table cellPadding="0" cellSpacing="0">
                  <tr>
                    {this.props.tabthitems.map(item => (
                        <Th item={item} sort={this.props.sort} onSort={this.props.onSort} />))
                    }
                  </tr>
                  {this.props.tabtritems.map(item => (
                      <Tr item={item} tabthitems={this.props.tabthitems} />))
                  }
                </table>
              );
          }
        };
        class Tr extends React.Component {
          constructor(props) {
              super(props);

              // 初始化一个空对象
              this.state = {};
          }

          render() {
              return (
                <tr>
                {this.props.tabthitems.map(item => (
                    <Td item={this.props.item} thitem={item} />))
                }
                </tr>
              );
          }
        };
        class Th extends React.Component {

          render() {

              var thStyle = {
                width:this.props.item.width
              };
              return (
              <th style={thStyle}>{this.props.item.title}</th>
              );
          }
        };
        class Td extends React.Component {
          render() {
              if(this.props.thitem.type=="checkbox"){
                  return (
                  <td><input type="checkbox" name="" /></td>
                  );
              } else {
                  return (
                  <td>{this.props.item[this.props.thitem.name]}</td>
                  );
              }
          }
        };

        // 分页
        class Tab extends React.Component {
          constructor(props) {
              super(props);
              this.gotoFirst=this.gotoFirst.bind(this);
              this.gotoPrevious=this.gotoPrevious.bind(this);
              this.gotoLast=this.gotoLast.bind(this);
              this.gotoNext=this.gotoNext.bind(this);
          }
          gotoFirst(){
            this.props.setPage(1);
          }
          gotoPrevious(){
            this.props.setPage(this.props.thisPage-1);
          }
          gotoLast(){
            var allNum=this.props.allNum;
            // 每页显示条数everyNum
            var everyNum=this.props.everyNum;
            var allPage=Math.ceil(allNum/everyNum);
            this.props.setPage(allPage);
          }
          gotoNext(){
            this.props.setPage(this.props.thisPage+1);
          }
          render() {
              var fenitems =[];
              // 所有条数allNum
              var allNum=this.props.allNum;
              // 每页显示条数everyNum
              var everyNum=this.props.everyNum;
              // 当前显示页thisPage
              var thisPage=this.props.thisPage;
              var allPage=Math.ceil(allNum/everyNum);
              if(allPage<=7){
                for(var i=1; i<=allPage; i++){
                  fenitems.push(i);
                }
              }else {
                if(thisPage-3<=1){
                  for(var i=1; i<=7; i++){
                    fenitems.push(i);
                  }
                } else if (thisPage+3>=allPage) {
                  for(var i=allPage-6; i<=allPage; i++){
                    fenitems.push(i);
                  }
                } else {
                  for(var i=thisPage-3; i<=thisPage+3; i++){
                    fenitems.push(i);
                  }
                }
              }
              var first = (<span className="table-tab-span1" onClick={this.gotoFirst}><img src="images/httab4.png" alt="" /></span>);
              var previous=(<span className="table-tab-span1" onClick={this.gotoPrevious}><img src="images/httab1.png" alt="" /></span>);
              var second=(<span className="table-tab-span1" onClick={this.gotoNext}><img src="images/httab2.png" alt="" /></span>);
              var next=(<span className="table-tab-span1" onClick={this.gotoLast}><img src="images/httab3.png" alt="" /></span>);

              if (thisPage==1) {
                var first = (<span className="table-tab-span1" ><img src="images/httab4_1.png" alt="" /></span>);
                var previous=(<span className="table-tab-span1"><img src="images/httab1_1.png" alt="" /></span>);
              }
              if(thisPage==allPage){
                var second = (<span className="table-tab-span1" ><img src="images/httab2_1.png" alt="" /></span>);
                var next=(<span className="table-tab-span1"><img src="images/httab3_1.png" alt="" /></span>);
              }
              return (
                <div className="table-tab">
                  {first}
                  {previous}
                  <div className="tabnumber">
                  {fenitems.map(item => (
                      <Tabnumber setPage={this.props.setPage} item={item} setSelected={this.setSelected} selected={thisPage} />))
                  }
                  </div>
                  {second}
                  {next}
                  <span className="table-tab-span4">共{allPage}页</span>
                  <span className="table-tab-span5">共{allNum}条记录</span>
                </div>
              );
            }
        };
        // 分页数字
        class Tabnumber extends React.Component {
          constructor(props) {
              super(props);
              // 初始化一个空对象
              this.handleClick = this.handleClick.bind(this);
          }
          handleClick(e){
            this.props.setPage(this.props.item);

          }
          render() {
              var e="";
              if(this.props.selected==this.props.item){
                e="om";
              }
              return (
                  <span className={e} onClick={this.handleClick}>{this.props.item}</span>
              );
            }
        };
        ReactDOM.render(
          <Warp/>,
          document.getElementById("example")
        );
        </script>
    </body>
</html>
